{"version":3,"sources":["example/App.tsx","reportWebVitals.ts","index.tsx","table/elements/TableElement.styles.ts","table/elements/TdElement.styles.ts","table/TableContext.ts","table/index.ts","table/elements/index.ts","table/elements/TableElement.tsx","table/elements/TdElement.tsx"],"names":["plugins","createReactPlugin","createTablePlugin","createHistoryPlugin","initialValue","type","children","text","components","ELEMENT_TABLE","TableElement","ELEMENT_TR","withProps","StyledElement","as","ELEMENT_TD","TdElement","App","useState","debugValue","setDebugValue","editableProps","placeholder","onChange","newValue","style","marginTop","JSON","stringify","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById","getTableElementStyles","root","borderCollapse","border","className","getTdElementStyles","removeColumn","removeRow","activeControl","background","zIndex","control","display","alignItems","justifyContent","position","boxSizing","selectors","borderRadius","width","height","padding","fontSize","color","add","content","highlightResizerStyle","margin","borderWidth","borderStyle","borderColor","minHeight","minWidth","selectColumn","selectRow","columnControl","borderBottom","top","left","transform","rowControl","borderRight","addColumn","right","addFirstColumn","addRow","bottom","addFirstRow","resizeHandler","cursor","firstRowResizer","highlightResizer","insertionBar","showInsertionBar","firstColumnInsertionBar","TableContext","createContext","useTable","useContext","getClassNames","getRootClassNames","styled","attributes","element","styles","nodeProps","classNames","editor","useSlate","path","ReactEditor","findPath","selected","useSelected","highlightRow","setHighlightRow","highlightColumn","setHighlightColumn","selectedRow","setSelectedRow","selectedColumn","setSelectedColumn","setInsertionBar","highlightRemoveRow","setHighlightRemoveRow","highlightRemoveColumn","setHighlightRemoveColumn","hlResizeColumn","setHlResizeColumn","resizingColumn","setResizingColumn","columnWidths","setColumnWidths","useEffect","selection","firstTr","Node","child","columnCount","Array","from","length","colWiths","fill","setTimeout","Transforms","setNodes","at","setColumnWidth","useCallback","columnIdx","widths","map","i","Provider","value","undefined","scope","mouseMoveEventRef","useRef","tableSelected","getBlockAbove","mode","tr","trPath","table","tablePath","rowControlRef","columnControlRef","isFirstColumn","isFirstRow","mouseMoveEventHandler","startWidth","startX","eventHandler","e","pageX","current","mouseUpEventHandler","body","removeProperty","removeEventListener","mouseDownEventHandler","setProperty","toDOMNode","offsetWidth","addEventListener","Path","equals","ref","contentEditable","onClick","onMouseOver","onMouseOut","childTRPath","removeNodes","newPath","next","insertNodes","select","console","log","startPoint","Editor","start","onMouseDown"],"mappings":"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","file":"static/js/main.1e163b8c.chunk.js","sourcesContent":["import {\r\n\tSlatePlugins,\r\n\tcreateReactPlugin,\r\n\tStyledElement,\r\n\twithProps,\r\n\tcreateHistoryPlugin,\r\n\tcreateTablePlugin,\r\n} from \"@udecode/slate-plugins\"\r\n\r\nimport { TableElement, TdElement } from \"../table\"\r\n\r\nimport {\r\n\tELEMENT_TABLE,\r\n\tELEMENT_TR,\r\n\tELEMENT_TD,\r\n} from \"@udecode/slate-plugins-table\"\r\n\r\nimport \"./App.css\"\r\nimport { useState } from \"react\"\r\nimport { Descendant } from \"slate\"\r\n\r\nconst plugins = [\r\n\tcreateReactPlugin(),\r\n\tcreateTablePlugin(),\r\n\tcreateHistoryPlugin(),\r\n]\r\n\r\nconst initialValue = [\r\n\t{\r\n\t\ttype: \"table\",\r\n\t\tchildren: [\r\n\t\t\t{\r\n\t\t\t\ttype: \"tr\",\r\n\t\t\t\tchildren: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: \"td\",\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"1\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: \"td\",\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"2\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: \"td\",\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"3\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\ttype: \"tr\",\r\n\t\t\t\tchildren: [\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: \"td\",\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"4\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: \"td\",\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"5\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\ttype: \"td\",\r\n\t\t\t\t\t\tchildren: [\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\ttext: \"6\",\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t],\r\n\t\t\t\t\t},\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t],\r\n\t},\r\n]\r\n\r\nconst components = {\r\n\t[ELEMENT_TABLE]: TableElement,\r\n\t[ELEMENT_TR]: withProps(StyledElement, { as: \"tr\" }),\r\n\t[ELEMENT_TD]: TdElement,\r\n}\r\n\r\nexport const App = () => {\r\n\tconst [debugValue, setDebugValue] = useState<Descendant[]>(initialValue)\r\n\tconst editableProps = {\r\n\t\tplaceholder: \"Type..\",\r\n\t}\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<SlatePlugins\r\n\t\t\t\tinitialValue={debugValue}\r\n\t\t\t\teditableProps={editableProps}\r\n\t\t\t\tplugins={plugins}\r\n\t\t\t\tcomponents={components}\r\n\t\t\t\tonChange={(newValue) => {\r\n\t\t\t\t\tsetDebugValue(newValue)\r\n\t\t\t\t}}\r\n\t\t\t/>\r\n\t\t\t<details style={{ marginTop: 20 }}>\r\n\t\t\t\t<summary>Node</summary>\r\n\t\t\t\t<pre>{JSON.stringify(debugValue, null, 2)}</pre>\r\n\t\t\t</details>\r\n\t\t</>\r\n\t)\r\n}\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport { App } from './example';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();","import { ClassName, RootStyleSet } from \"@udecode/slate-plugins\"\n\nexport const getTableElementStyles = ({\n\tclassName,\n}: ClassName): RootStyleSet => ({\n\troot: [\n\t\t{\n\t\t\t\"--table-border-color\": \"rgb(193, 199, 208)\",\n\t\t\t\"--control-background-color\": \"rgb(244, 245, 247)\",\n\t\t\t\"--selected-cell-border-color\": \"rgb(0, 101, 255)\",\n\t\t\t\"--selected-control-background-color\": \"rgb(76, 154, 255)\",\n\t\t\t\"--remove-button-background\": \"rgba(9, 30, 66, 0.04)\",\n\t\t\t\"--remove-button-color\": \"rgb(94, 108, 132)\",\n\t\t\t\"--remove-border\": \"rgb(255, 86, 48)\",\n\t\t\t\"--control-remove-background\": \"rgb(255, 189, 173)\",\n\t\t\t\"--add-circle-color\": \"rgb(193, 199, 208)\",\n\t\t\tborderCollapse: \"collapse\",\n\t\t\tborder: \"1px solid #ccc\",\n\t\t},\n\t\tclassName,\n\t],\n})\n","import { ClassName, RootStyleSet } from \"@udecode/slate-plugins\"\nimport { IStyle } from \"@uifabric/styling\"\nimport { TdElementStyleSet } from \"./TdElement.types\"\n\nexport const getTdElementStyles = ({\n\tclassName,\n\tremoveColumn,\n\tremoveRow,\n\tselectColumn,\n\tselectRow,\n\tfirstRowResizer,\n\thighlightResizer,\n\tshowInsertionBar,\n\tfirstColumnInsertionBar,\n}: any): TdElementStyleSet => {\n\tconst activeControl = {\n\t\tborder: \"1px solid var(--selected-cell-border-color)\",\n\t\tbackground: \"var(--selected-control-background-color)\",\n\t\tzIndex: 100,\n\t}\n\n\tconst control = [\n\t\t\"control\",\n\t\t{\n\t\t\tdisplay: \"flex\",\n\t\t\talignItems: \"center\",\n\t\t\tjustifyContent: \"center\",\n\t\t\tborder: \"1px solid var(--table-border-color)\",\n\t\t\tposition: \"absolute\",\n\t\t\tbackground: \"var(--control-background-color)\",\n\t\t\tboxSizing: \"border-box\",\n\t\t\tselectors: {\n\t\t\t\t\":hover\": activeControl,\n\t\t\t\t\"> button\": {\n\t\t\t\t\tposition: \"absolute\",\n\t\t\t\t\tdisplay: \"inline-flex\",\n\t\t\t\t\tjustifyContent: \"center\",\n\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\tborderRadius: 3,\n\t\t\t\t\twidth: 16,\n\t\t\t\t\theight: 16,\n\t\t\t\t\tborder: 0,\n\t\t\t\t\tpadding: 0,\n\t\t\t\t\tfontSize: \"1.1em\",\n\t\t\t\t\tbackground: \"var(--remove-button-background)\",\n\t\t\t\t\tcolor: \"var(--remove-button-color)\",\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t]\n\n\tconst add = [\n\t\t\"add\",\n\t\t{\n\t\t\tposition: \"absolute\",\n\t\t\tdisplay: \"inline-flex\",\n\t\t\tjustifyContent: \"center\",\n\t\t\talignItems: \"center\",\n\t\t\twidth: 16,\n\t\t\theight: 16,\n\t\t\tselectors: {\n\t\t\t\t\":before\": {\n\t\t\t\t\tcontent: \"'â€¢'\",\n\t\t\t\t\tborderRadius: \"50%\",\n\t\t\t\t\tcolor: \"var(--add-circle-color)\",\n\t\t\t\t\tfontSize: \"0.9em\",\n\t\t\t\t},\n\t\t\t\t\":hover:before\": {\n\t\t\t\t\tdisplay: \"none\",\n\t\t\t\t},\n\t\t\t\t\":hover:after\": {\n\t\t\t\t\tcontent: \"'+'\",\n\t\t\t\t\tfontSize: \"0.8em\",\n\t\t\t\t\tbackground: \"rgb(244, 245, 247)\",\n\t\t\t\t\tdisplay: \"inline-flex\",\n\t\t\t\t\tjustifyContent: \"center\",\n\t\t\t\t\talignItems: \"center\",\n\t\t\t\t\twidth: 16,\n\t\t\t\t\theight: 16,\n\t\t\t\t\tborderRadius: 2,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t]\n\n\tconst highlightResizerStyle = {\n\t\tcontent: \"''\",\n\t\tdisplay: \"block\",\n\t\twidth: 2,\n\t\tbackground: \"var(--selected-cell-border-color)\",\n\t\tmargin: \"0 auto\",\n\t\theight: \"100%\",\n\t}\n\treturn {\n\t\troot: [\n\t\t\t{\n\t\t\t\tborderWidth: \"1px 0 0 1px\",\n\t\t\t\tborderStyle: \"solid\",\n\t\t\t\tborderColor: \"var(--table-border-color)\",\n\t\t\t\tminHeight: 40,\n\t\t\t\tpadding: 8,\n\t\t\t\tposition: \"relative\",\n\t\t\t\tminWidth: 50,\n\t\t\t},\n\t\t\tselectColumn && [\n\t\t\t\t\"select-column\",\n\t\t\t\t{\n\t\t\t\t\tborder: \"1px solid var(--selected-cell-border-color)\",\n\t\t\t\t\tselectors: {\n\t\t\t\t\t\t\"& .column-control\": activeControl,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tselectRow && [\n\t\t\t\t\"select-row\",\n\t\t\t\t{\n\t\t\t\t\tborder: \"1px solid var(--selected-cell-border-color)\",\n\t\t\t\t\tselectors: {\n\t\t\t\t\t\t\"& .row-control\": activeControl,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tremoveColumn && [\n\t\t\t\t\"remove-column\",\n\t\t\t\t{\n\t\t\t\t\tborder: \"1px solid var(--remove-border)\",\n\t\t\t\t\tselectors: {\n\t\t\t\t\t\t\"& .column-control\": {\n\t\t\t\t\t\t\tborder: \"1px solid var(--remove-border)\",\n\t\t\t\t\t\t\tbackground: \"var(--control-remove-background)\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"& .column-control > button\": {\n\t\t\t\t\t\t\tbackground: \"var(--remove-border)\",\n\t\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tremoveRow && [\n\t\t\t\t\"remove-row\",\n\t\t\t\t{\n\t\t\t\t\tborder: \"1px solid var(--remove-border)\",\n\t\t\t\t\tselectors: {\n\t\t\t\t\t\t\"& .row-control\": {\n\t\t\t\t\t\t\tborder: \"1px solid var(--remove-border)\",\n\t\t\t\t\t\t\tbackground: \"var(--control-remove-background)\",\n\t\t\t\t\t\t},\n\t\t\t\t\t\t\"& .row-control > button\": {\n\t\t\t\t\t\t\tbackground: \"var(--remove-border)\",\n\t\t\t\t\t\t\tcolor: \"white\",\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tclassName,\n\t\t],\n\t\tcolumnControl: [\n\t\t\t\"column-control\",\n\t\t\tcontrol,\n\t\t\t{\n\t\t\t\tborderBottom: \"none !important\",\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\twidth: \"calc(100% + 2px)\",\n\t\t\t\theight: 10,\n\t\t\t\ttransform: \"translate(-1px, -11px)\",\n\t\t\t\talignItems: \"flex-start\",\n\t\t\t\tselectors: {\n\t\t\t\t\t\":hover\": {\n\t\t\t\t\t\tborderBottom: \"none !important\",\n\t\t\t\t\t},\n\t\t\t\t\t\"> button\": {\n\t\t\t\t\t\ttransform: \"translateY(calc(-100% - 5px))\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\trowControl: [\n\t\t\t\"row-control\",\n\t\t\tcontrol,\n\t\t\t{\n\t\t\t\tborderRight: \"none !important\",\n\t\t\t\ttop: 0,\n\t\t\t\tleft: 0,\n\t\t\t\theight: \"calc(100% + 2px)\",\n\t\t\t\twidth: 10,\n\t\t\t\ttransform: \"translate(-11px, -1px)\",\n\t\t\t\tjustifyContent: \"flex-start\",\n\t\t\t\tselectors: {\n\t\t\t\t\t\":hover\": {\n\t\t\t\t\t\tborderRight: \"none !important\",\n\t\t\t\t\t},\n\t\t\t\t\t\"> button\": {\n\t\t\t\t\t\ttransform: \"translateX(calc(-100% - 5px))\",\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\taddColumn: [\n\t\t\tadd,\n\t\t\t{\n\t\t\t\tright: 0,\n\t\t\t\ttop: 0,\n\t\t\t\ttransform: \"translate(8px, -30px)\",\n\t\t\t},\n\t\t],\n\t\taddFirstColumn: [\n\t\t\tadd,\n\t\t\t{\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\ttransform: \"translate(-8px, -30px)\",\n\t\t\t},\n\t\t],\n\t\taddRow: [\n\t\t\tadd,\n\t\t\t{\n\t\t\t\tleft: 0,\n\t\t\t\tbottom: 0,\n\t\t\t\ttransform: \"translate(-30px, 8px)\",\n\t\t\t},\n\t\t],\n\t\taddFirstRow: [\n\t\t\tadd,\n\t\t\t{\n\t\t\t\tleft: 0,\n\t\t\t\ttop: 0,\n\t\t\t\ttransform: \"translate(-30px, -8px)\",\n\t\t\t},\n\t\t],\n\t\tresizeHandler: [\n\t\t\t\"resize-handler\",\n\t\t\t{\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tright: -5,\n\t\t\t\tbottom: 0,\n\t\t\t\ttop: 0,\n\t\t\t\twidth: 10,\n\t\t\t\tzIndex: 200,\n\t\t\t\tcursor: \"col-resize\",\n\t\t\t\tselectors: {\n\t\t\t\t\t\":hover:before\": highlightResizerStyle,\n\t\t\t\t},\n\t\t\t},\n\t\t\tfirstRowResizer && [\n\t\t\t\t\"first-row-resizer\",\n\t\t\t\t{\n\t\t\t\t\ttop: \"-10px !important\",\n\t\t\t\t},\n\t\t\t],\n\t\t\thighlightResizer && [\n\t\t\t\t\"highlight\",\n\t\t\t\t{\n\t\t\t\t\tselectors: {\n\t\t\t\t\t\t\":before\": highlightResizerStyle,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t],\n\t\tinsertionBar: [\n\t\t\t\"insertion-bar\",\n\t\t\t{\n\t\t\t\tposition: \"absolute\",\n\t\t\t\tbottom: -1,\n\t\t\t\tright: 0,\n\t\t\t\tdisplay: \"none\",\n\t\t\t\twidth: \"100%\",\n\t\t\t\theight: 2,\n\t\t\t\tbackground: \"var(--selected-cell-border-color)\",\n\t\t\t\tzIndex: 10,\n\t\t\t},\n\t\t\tshowInsertionBar && [\n\t\t\t\t\"show-insertion-bar\",\n\t\t\t\t{\n\t\t\t\t\tdisplay: \"block\",\n\t\t\t\t},\n\t\t\t],\n\t\t\tfirstColumnInsertionBar && [\n\t\t\t\t\"first-column-insertion-bar\",\n\t\t\t\t{\n\t\t\t\t\twidth: \"calc(100% + 10px)\",\n\t\t\t\t},\n\t\t\t],\n\t\t],\n\t}\n}\n","import { createContext, useContext } from \"react\"\n\ntype columnSetter = (columnIndex: number | null) => void\ntype rowSetter = (row: number[] | null) => void\n\nexport interface TableContextInterface {\n\tselected: boolean\n\thighlightRow: number[]\n\tsetHighlightRow: rowSetter\n\thighlightColumn: number\n\tsetHighlightColumn: columnSetter\n\thighlightRemoveColumn: number\n\tsetHighlightRemoveColumn: columnSetter\n\thighlightRemoveRow: number[]\n\tsetHighlightRemoveRow: rowSetter\n\tselectedColumn: number\n\tsetSelectedColumn: columnSetter\n\tselectedRow: number[]\n\tsetSelectedRow: rowSetter\n\thlResizeColumn: number\n\tsetHlResizeColumn: columnSetter\n\tresizingColumn: number\n\tsetResizingColumn: columnSetter\n\tsetColumnWidth: (columnIndex: number, width: number) => void\n\tinsertionBar: number[]\n\tsetInsertionBar: rowSetter\n}\n\nexport const TableContext = createContext<TableContextInterface | null>(null)\n\nexport const useTable = () => {\n\treturn useContext(TableContext)\n}\n","export * from \"./elements\"\n","export * from \"./TableElement.styles\"\nexport * from \"./TableElement\"\nexport * from \"./TdElement.styles\"\nexport * from \"./TdElement\"\nexport * from \"./TdElement.types\"\n","import { useCallback, useEffect, useLayoutEffect, useState } from \"react\"\r\nimport { Node, Transforms } from \"slate\"\r\nimport { useSlate, useSelected, ReactEditor } from \"slate-react\"\r\nimport { TableContext, TableContextInterface } from \"../TableContext\"\r\nimport {\r\n\tClassName,\r\n\tRootStyleSet,\r\n\tStyledElementProps,\r\n\tgetRootClassNames,\r\n} from \"@udecode/slate-plugins\"\r\nimport { styled } from \"@uifabric/utilities\"\r\nimport { getTableElementStyles } from \"./TableElement.styles\"\r\n\r\nconst getClassNames = getRootClassNames()\r\n\r\nexport const TableElementBase = ({\r\n\tattributes,\r\n\tchildren,\r\n\telement,\r\n\tclassName,\r\n\tstyles,\r\n\tnodeProps,\r\n}: StyledElementProps) => {\r\n\tconst classNames = getClassNames(styles, { className })\r\n\tconst editor = useSlate()\r\n\tconst path = ReactEditor.findPath(editor as ReactEditor, element)\r\n\tconst selected = useSelected()\r\n\tconst [highlightRow, setHighlightRow] = useState<number[] | null>(null)\r\n\tconst [highlightColumn, setHighlightColumn] = useState<number | null>(null)\r\n\tconst [selectedRow, setSelectedRow] = useState<number[] | null>(null)\r\n\tconst [selectedColumn, setSelectedColumn] = useState<number | null>(null)\r\n\tconst [insertionBar, setInsertionBar] = useState<number[] | null>(null)\r\n\tconst [highlightRemoveRow, setHighlightRemoveRow] = useState<\r\n\t\tnumber[] | null\r\n\t>(null)\r\n\tconst [highlightRemoveColumn, setHighlightRemoveColumn] = useState<\r\n\t\tnumber | null\r\n\t>(null)\r\n\tconst [hlResizeColumn, setHlResizeColumn] = useState<number | null>(null)\r\n\tconst [resizingColumn, setResizingColumn] = useState<number | null>(null)\r\n\tconst [columnWidths, setColumnWidths] = useState(element.columnWidths || [])\r\n\r\n\tuseEffect(() => {\r\n\t\tsetHighlightRow(null)\r\n\t\tsetHighlightColumn(null)\r\n\t\tsetSelectedRow(null)\r\n\t\tsetSelectedColumn(null)\r\n\t\tsetHighlightRemoveRow(null)\r\n\t\tsetHighlightRemoveColumn(null)\r\n\t\t// setHlResizeColumn(null)\r\n\t}, [editor.selection])\r\n\r\n\t// set columnWidths\r\n\tuseEffect(() => {\r\n\t\tif (element.columnWidths) return\r\n\t\tconst firstTr = Node.child(element, 0)\r\n\t\tconst columnCount = Array.from(Node.children(firstTr, [])).length\r\n\t\tconst colWiths = Array(columnCount).fill(100)\r\n\t\tsetColumnWidths(colWiths)\r\n\t\tsetTimeout(() => {\r\n\t\t\tTransforms.setNodes(\r\n\t\t\t\teditor,\r\n\t\t\t\t{ columnWidths: colWiths } as Partial<Node>,\r\n\t\t\t\t{ at: path }\r\n\t\t\t)\r\n\t\t}, 0)\r\n\t}, [])\r\n\r\n\tuseEffect(() => {\r\n\t\tif (resizingColumn !== null) return\r\n\r\n\t\tTransforms.setNodes(editor, { columnWidths } as Partial<Node>, {\r\n\t\t\tat: path,\r\n\t\t})\r\n\t}, [resizingColumn])\r\n\r\n\tconst setColumnWidth = useCallback(\r\n\t\t(columnIdx: number, width: number) => {\r\n\t\t\tif (width <= 50) return\r\n\t\t\tconst widths = [...columnWidths]\r\n\t\t\twidths[columnIdx] = width\r\n\t\t\tsetColumnWidths(widths)\r\n\t\t},\r\n\t\t[editor, path, columnWidths]\r\n\t)\r\n\r\n\treturn (\r\n\t\t<table {...attributes} className={classNames.root} {...nodeProps}>\r\n\t\t\t<colgroup>\r\n\t\t\t\t{[...columnWidths].map((width: number, i: number) => (\r\n\t\t\t\t\t<col style={{ width }} key={i} />\r\n\t\t\t\t))}\r\n\t\t\t</colgroup>\r\n\t\t\t<TableContext.Provider\r\n\t\t\t\tvalue={\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tselected,\r\n\t\t\t\t\t\thighlightRow,\r\n\t\t\t\t\t\tsetHighlightRow,\r\n\t\t\t\t\t\thighlightColumn,\r\n\t\t\t\t\t\tsetHighlightColumn,\r\n\t\t\t\t\t\thighlightRemoveColumn,\r\n\t\t\t\t\t\tsetHighlightRemoveColumn,\r\n\t\t\t\t\t\thighlightRemoveRow,\r\n\t\t\t\t\t\tsetHighlightRemoveRow,\r\n\t\t\t\t\t\tselectedColumn,\r\n\t\t\t\t\t\tsetSelectedColumn,\r\n\t\t\t\t\t\tselectedRow,\r\n\t\t\t\t\t\tsetSelectedRow,\r\n\t\t\t\t\t\thlResizeColumn,\r\n\t\t\t\t\t\tsetHlResizeColumn,\r\n\t\t\t\t\t\tresizingColumn,\r\n\t\t\t\t\t\tsetResizingColumn,\r\n\t\t\t\t\t\tsetColumnWidth,\r\n\t\t\t\t\t\tinsertionBar,\r\n\t\t\t\t\t\tsetInsertionBar,\r\n\t\t\t\t\t} as TableContextInterface\r\n\t\t\t\t}\r\n\t\t\t>\r\n\t\t\t\t<tbody>{children}</tbody>\r\n\t\t\t</TableContext.Provider>\r\n\t\t</table>\r\n\t)\r\n}\r\n\r\nexport const TableElement = styled<StyledElementProps, ClassName, RootStyleSet>(\r\n\tTableElementBase,\r\n\tgetTableElementStyles,\r\n\tundefined,\r\n\t{\r\n\t\tscope: \"TableElement\",\r\n\t}\r\n)\r\n","import { useEffect, useRef, useCallback } from \"react\"\nimport { Editor, Node, Path, Transforms } from \"slate\"\nimport { ReactEditor, useSlate } from \"slate-react\"\nimport { TableContextInterface, useTable } from \"../TableContext\"\nimport { getBlockAbove } from \"@udecode/slate-plugins\"\nimport { TableElementType, TrElementType } from \"../types\"\nimport {\n\tClassName,\n\tRootStyleSet,\n\tStyledElementProps,\n\tgetRootClassNames,\n} from \"@udecode/slate-plugins\"\nimport { styled } from \"@uifabric/utilities\"\nimport { getTdElementStyles } from \"./TdElement.styles\"\nimport { TdElementStyleProps, TdElementStyleSet } from \"./TdElement.types\"\n\nconst getClassNames = getRootClassNames<\n\tTdElementStyleProps,\n\tTdElementStyleSet\n>()\n\nexport const TdElementBase = ({\n\tattributes,\n\tchildren,\n\telement,\n\tclassName,\n\tstyles,\n\tnodeProps,\n}: StyledElementProps) => {\n\tconst mouseMoveEventRef = useRef<any>(null)\n\tconst editor = useSlate() as ReactEditor\n\tconst {\n\t\tselected: tableSelected,\n\t\thighlightRow,\n\t\tsetHighlightRow,\n\t\thighlightColumn,\n\t\tsetHighlightColumn,\n\t\tsetSelectedRow,\n\t\tselectedRow,\n\t\tselectedColumn,\n\t\tsetSelectedColumn,\n\t\thighlightRemoveColumn,\n\t\tsetHighlightRemoveColumn,\n\t\thighlightRemoveRow,\n\t\tsetHighlightRemoveRow,\n\t\thlResizeColumn,\n\t\tsetHlResizeColumn,\n\t\tresizingColumn,\n\t\tsetResizingColumn,\n\t\tsetColumnWidth,\n\t\tinsertionBar,\n\t\tsetInsertionBar,\n\t} = useTable() as TableContextInterface\n\tconst path = ReactEditor.findPath(editor, element)\n\tconst columnIdx = path[path.length - 1]\n\tconst [tr, trPath] = getBlockAbove(editor, {\n\t\tat: ReactEditor.findPath(editor as ReactEditor, element),\n\t\tmode: \"lowest\",\n\t}) as [TrElementType, Path]\n\tconst rowIdx = trPath[trPath.length - 1]\n\n\tconst [table, tablePath] = getBlockAbove(editor, {\n\t\tat: trPath,\n\t\tmode: \"lowest\",\n\t}) as [TableElementType, Path]\n\n\tconst rowControlRef = useRef(null)\n\tconst columnControlRef = useRef(null)\n\n\tlet isFirstColumn = false\n\tif (tr.children[0] === element) {\n\t\tisFirstColumn = true\n\t}\n\n\tlet isFirstRow = false\n\tif (table.children[0] === tr) {\n\t\tisFirstRow = true\n\t}\n\n\tuseEffect(() => {\n\t\tif (!tableSelected) {\n\t\t\tsetHighlightColumn(null)\n\t\t\tsetSelectedRow(null)\n\t\t\tsetSelectedColumn(null)\n\t\t}\n\t}, [tableSelected])\n\n\tconst mouseMoveEventHandler = useCallback(\n\t\t({ startWidth, startX }: any) => {\n\t\t\tconst eventHandler = (e: MouseEvent) => {\n\t\t\t\tlet width = startWidth + e.pageX - startX\n\t\t\t\tsetColumnWidth(columnIdx, width)\n\t\t\t}\n\t\t\tmouseMoveEventRef.current = eventHandler\n\t\t\treturn eventHandler\n\t\t},\n\t\t[columnIdx, setColumnWidth, mouseMoveEventRef]\n\t)\n\n\tconst mouseUpEventHandler = useCallback(\n\t\t(e: any) => {\n\t\t\tsetResizingColumn(null)\n\t\t\tdocument.body.style.removeProperty(\"cursor\")\n\t\t\tdocument.removeEventListener(\"mousemove\", mouseMoveEventRef.current)\n\t\t\tdocument.removeEventListener(\"mouseup\", mouseUpEventHandler)\n\t\t},\n\t\t[editor, element, path, mouseMoveEventRef]\n\t)\n\n\tconst mouseDownEventHandler = useCallback(\n\t\t(e: any) => {\n\t\t\tdocument.body.style.setProperty(\"cursor\", \"col-resize\")\n\t\t\tconst startX = e.pageX\n\t\t\tconst tdElement = ReactEditor.toDOMNode(editor, element)\n\t\t\tconst startWidth = tdElement.offsetWidth\n\t\t\tsetResizingColumn(columnIdx)\n\t\t\tdocument.addEventListener(\n\t\t\t\t\"mousemove\",\n\t\t\t\tmouseMoveEventHandler({ startWidth, startX })\n\t\t\t)\n\t\t\tdocument.addEventListener(\"mouseup\", mouseUpEventHandler)\n\t\t},\n\t\t[\n\t\t\teditor,\n\t\t\telement,\n\t\t\tcolumnIdx,\n\t\t\tsetResizingColumn,\n\t\t\tmouseMoveEventHandler,\n\t\t\tmouseUpEventHandler,\n\t\t]\n\t)\n\n\tconst classNames = getClassNames(styles, {\n\t\tclassName,\n\t\tselectColumn:\n\t\t\tcolumnIdx === highlightColumn || columnIdx === selectedColumn,\n\t\tselectRow:\n\t\t\t(highlightRow && Path.equals(trPath, highlightRow)) ||\n\t\t\t(selectedRow && Path.equals(trPath, selectedRow)),\n\t\tremoveColumn: columnIdx === highlightRemoveColumn,\n\t\tremoveRow:\n\t\t\thighlightRemoveRow && Path.equals(trPath, highlightRemoveRow),\n\t\tfirstRowResizer: isFirstRow,\n\t\thighlightResizer:\n\t\t\thlResizeColumn === columnIdx || resizingColumn === columnIdx,\n\t\tshowInsertionBar: insertionBar && Path.equals(trPath, insertionBar),\n\t\tfirstColumnInsertionBar: isFirstColumn,\n\t})\n\n\treturn (\n\t\t<td {...attributes} className={classNames.root} {...nodeProps}>\n\t\t\t{children}\n\t\t\t{tableSelected && isFirstRow && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={columnControlRef}\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tclassName={classNames.columnControl}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetSelectedColumn(columnIdx)\n\t\t\t\t\t\t\tsetSelectedRow(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\tsetHighlightColumn(columnIdx)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\t\tsetHighlightColumn(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{selectedColumn === columnIdx && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\t\t\tsetHighlightRemoveColumn(columnIdx)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\t\t\t\tsetHighlightRemoveColumn(null)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tfor (const [, childTRPath] of Node.children(\n\t\t\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\t\t\ttablePath\n\t\t\t\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tTransforms.removeNodes(editor, {\n\t\t\t\t\t\t\t\t\t\t\t\tat: [...childTRPath, columnIdx],\n\t\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t\t}, 0)\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tsetHighlightRemoveColumn(null)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&times;\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tclassName={classNames.addColumn}\n\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\tsetHlResizeColumn(columnIdx)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\t\tsetHlResizeColumn(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tlet newPath: Path | number = Path.next(path)\n\t\t\t\t\t\t\tnewPath = newPath[newPath.length - 1]\n\t\t\t\t\t\t\tfor (const [, childTRPath] of Node.children(\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\ttablePath\n\t\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\t\tTransforms.insertNodes(\n\t\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype: \"td\",\n\t\t\t\t\t\t\t\t\t\tchildren: [{ text: \"\" }],\n\t\t\t\t\t\t\t\t\t} as Node,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tat: [...childTRPath, newPath],\n\t\t\t\t\t\t\t\t\t\tselect:\n\t\t\t\t\t\t\t\t\t\t\tchildTRPath[\n\t\t\t\t\t\t\t\t\t\t\t\tchildTRPath.length - 1\n\t\t\t\t\t\t\t\t\t\t\t] === 0,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetHighlightRemoveRow(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t></div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{tableSelected && isFirstColumn && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tref={rowControlRef}\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tclassName={classNames.rowControl}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsetSelectedRow(trPath)\n\t\t\t\t\t\t\tsetSelectedColumn(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\tsetHighlightRow(trPath)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\t\tsetHighlightRow(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{selectedRow && Path.equals(selectedRow, trPath) && (\n\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\t\t\tsetHighlightRemoveRow(trPath)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\t\t\t\tsetHighlightRemoveRow(null)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\t\tconsole.log(\"clicked\")\n\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\tTransforms.removeNodes(editor, {\n\t\t\t\t\t\t\t\t\t\t\tat: trPath,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t}, 0)\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t&times;\n\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tclassName={classNames.addRow}\n\t\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\t\tsetInsertionBar(trPath)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\t\tsetInsertionBar(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst children = Array(\n\t\t\t\t\t\t\t\tArray.from(Node.children(tr, [])).length\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t\t\t.map(() => ({\n\t\t\t\t\t\t\t\t\ttype: \"td\",\n\t\t\t\t\t\t\t\t\tchildren: [{ text: \"\" }],\n\t\t\t\t\t\t\t\t}))\n\n\t\t\t\t\t\t\tTransforms.insertNodes(\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"tr\",\n\t\t\t\t\t\t\t\t\tchildren,\n\t\t\t\t\t\t\t\t} as Node,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tat: Path.next(trPath),\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tconst startPoint = Editor.start(\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\tPath.next(trPath)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\tTransforms.select(editor, startPoint)\n\t\t\t\t\t\t}}\n\t\t\t\t\t></div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{tableSelected && isFirstColumn && isFirstRow && (\n\t\t\t\t<>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tclassName={classNames.addFirstRow}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tconst children = Array(\n\t\t\t\t\t\t\t\tArray.from(Node.children(tr, [])).length\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t.fill(null)\n\t\t\t\t\t\t\t\t.map(() => ({\n\t\t\t\t\t\t\t\t\ttype: \"td\",\n\t\t\t\t\t\t\t\t\tchildren: [{ text: \"\" }],\n\t\t\t\t\t\t\t\t}))\n\n\t\t\t\t\t\t\tTransforms.insertNodes(\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\ttype: \"tr\",\n\t\t\t\t\t\t\t\t\tchildren,\n\t\t\t\t\t\t\t\t} as Node,\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tat: trPath,\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t\tconst startPoint = Editor.start(editor, trPath)\n\t\t\t\t\t\t\tTransforms.select(editor, startPoint)\n\t\t\t\t\t\t}}\n\t\t\t\t\t></div>\n\t\t\t\t\t<div\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t\tclassName={classNames.addFirstColumn}\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tfor (const [, childTRPath] of Node.children(\n\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\ttablePath\n\t\t\t\t\t\t\t)) {\n\t\t\t\t\t\t\t\tTransforms.insertNodes(\n\t\t\t\t\t\t\t\t\teditor,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\ttype: \"td\",\n\t\t\t\t\t\t\t\t\t\tchildren: [{ text: \"\" }],\n\t\t\t\t\t\t\t\t\t} as Node,\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tat: [...childTRPath, 0],\n\t\t\t\t\t\t\t\t\t\tselect:\n\t\t\t\t\t\t\t\t\t\t\tchildTRPath[\n\t\t\t\t\t\t\t\t\t\t\t\tchildTRPath.length - 1\n\t\t\t\t\t\t\t\t\t\t\t] === 0,\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tsetHighlightRemoveRow(null)\n\t\t\t\t\t\t}}\n\t\t\t\t\t></div>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t{tableSelected && (\n\t\t\t\t<div\n\t\t\t\t\tclassName={classNames.resizeHandler}\n\t\t\t\t\tonMouseOver={() => {\n\t\t\t\t\t\tsetHlResizeColumn(columnIdx)\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseOut={() => {\n\t\t\t\t\t\tsetHlResizeColumn(null)\n\t\t\t\t\t}}\n\t\t\t\t\tonMouseDown={mouseDownEventHandler}\n\t\t\t\t\tcontentEditable={false}\n\t\t\t\t></div>\n\t\t\t)}\n\n\t\t\t{tableSelected &&\n\t\t\t\tinsertionBar &&\n\t\t\t\tPath.equals(trPath, insertionBar) && (\n\t\t\t\t\t<div\n\t\t\t\t\t\tclassName={classNames.insertionBar}\n\t\t\t\t\t\tcontentEditable={false}\n\t\t\t\t\t></div>\n\t\t\t\t)}\n\t\t</td>\n\t)\n}\n\nexport const TdElement = styled<StyledElementProps, ClassName, RootStyleSet>(\n\tTdElementBase,\n\tgetTdElementStyles,\n\tundefined,\n\t{\n\t\tscope: \"TdElement\",\n\t}\n)\n"],"sourceRoot":""}